const socket=io(),uuidv4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}),controllerDiv=document.querySelector(".controller");let controllerId,controllerLink,userId=uuidv4(),url=new URL(window.location.href),urlControllerId=url.searchParams.get("controller");if(null==urlControllerId){console.log("not in URL"),controllerId=uuidv4(),controllerLink="http://localhost:3000/remoteControl?controller="+controllerId,console.log("controllerId",controllerId);let e=document.createElement("a");e.innerHTML=controllerLink,e.setAttribute("href",controllerLink),e.setAttribute("target","_blank"),controllerDiv.appendChild(e)}if(null!=urlControllerId){let e={up:document.querySelector(".key--up"),right:document.querySelector(".key--right"),down:document.querySelector(".key--down"),left:document.querySelector(".key--left")};console.log("controls",e);const o=Object.entries(e);console.log("controlEntries",o);for(const[e,r]of o)console.log(r),r.addEventListener("mousedown",(function(o){o.preventDefault(),console.log("mousedown",e),socket.emit("keypress",{dir:e,state:"pressed",userId:userId,controllerId:urlControllerId})})),r.addEventListener("mouseup",(function(o){o.preventDefault(o),console.log("mouseup",e),socket.emit("keypress",{dir:e,state:"released",userId:userId,controllerId:urlControllerId})}))}else{const e=document.querySelector(".event");let o=!1,r="released";const l=(l,t=r)=>{e.innerHTML=l,o="pressed"==t,e.style.color="black",console.log("moving?",o),o&&(e.style.color="crimson")};socket.on("move",o=>{o.controllerId==controllerId&&(console.log("move command",o.dir),console.log("state",o.state),console.log("from",o.userId),console.log("controllerId",o.controllerId),e.innerHTML=o.dir,l(o.dir,o.state))})}
//# sourceMappingURL=main.min.js.map